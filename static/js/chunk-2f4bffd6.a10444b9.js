(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f4bffd6"],{"43ce":function(e,t,a){"use strict";var r=a("c2f4"),o=a.n(r);o.a},"98d6":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return s}));var r=a("b775");function o(e){return Object(r["a"])({url:"/template/tree/group",method:"post",params:e})}function s(e){return Object(r["a"])({url:"/template/tree/org",method:"post",params:e})}},bd2e:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("异步树")])]),e._v(" "),a("el-form",{ref:"ruleForm",staticClass:"login-info",attrs:{model:e.formData,size:"mini"}},[a("el-row",[a("el-col",{attrs:{md:12,xs:24,sm:24}},[a("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"机构树:","label-width":"150px",prop:"orgNm",rules:[{required:!0,message:"请输入",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"机构树"},on:{focus:e.openOrgTree},model:{value:e.formData.orgNm,callback:function(t){e.$set(e.formData,"orgNm",t)},expression:"formData.orgNm"}})],1)],1)],1)],1)],1),e._v(" "),e.orgStatus?a("AsyncTree",{attrs:{visible:e.orgStatus},on:{changeVisible:e.updateVisible,save:e.saveOrg}}):e._e()],1)},o=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"机构树",visible:e.visible,width:"40%","before-close":e.modalClose}},[a("el-tree",{attrs:{props:e.defaultProps,"node-key":"_id","highlight-current":"",lazy:"",load:e.loadNode},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{staticClass:"rightBtn"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.save}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:e.modalClose}},[e._v("取消")])],1)],1)],1)},i=[],n=(a("6d57"),a("98d6")),l={props:{visible:Boolean},data:function(){return{data:[],defaultProps:{children:"children",label:"enumName",isLeaf:"leaf"},treeRowData:{}}},methods:{handleNodeClick:function(e){console.log(e),this.treeRowData=e},loadNode:function(e,t){0===e.level&&this.requestTree(t),e.level>=1&&this.getIndex(e,t)},requestTree:function(e){var t=this,a={parentEnumKey:"01"};Object(n["b"])(a).then((function(a){a&&(t.data=a.data.RetList,t.data.forEach((function(e){"1"===e.isLeaf?e.leaf=!1:e.leaf=!0})),e(t.data))}))},getIndex:function(e,t){var a=this,r={parentEnumKey:e.data.enumKey};Object(n["b"])(r).then((function(e){e&&(a.data=e.data.RetList,a.data.forEach((function(e){"1"===e.isLeaf?e.leaf=!1:e.leaf=!0})),t(a.data))}))},modalClose:function(){this.$emit("changeVisible",!1)},save:function(){this.$emit("save",this.treeRowData)}}},c=l,u=(a("43ce"),a("623f")),d=Object(u["a"])(c,s,i,!1,null,"3f59eb75",null),f=d.exports,m={components:{AsyncTree:f},data:function(){return{formData:{orgNm:"",orgNo:""},orgStatus:!1}},methods:{openOrgTree:function(){this.orgStatus=!0},updateVisible:function(e){this.orgStatus=e},saveOrg:function(e){"{}"!==JSON.stringify(e)?(this.$set(this.formData,"orgNm",e.enumName),this.formData.orgNo=e.enumKey,this.$refs["ruleForm"].clearValidate(),this.orgStatus=!1):this.$message({type:"error",message:"请选择一条数据"})}}},h=m,p=Object(u["a"])(h,r,o,!1,null,"1aa81fdc",null);t["default"]=p.exports},c2f4:function(e,t,a){}}]);